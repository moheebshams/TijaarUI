{% extends 'base.html' %}
{% block body %}
{% load static %}

<section class="w-full px-4 md:px-7 py-12 md:py-16">
  <div class="max-w-7xl mx-auto">

    <!-- Header -->
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900">All Products</h2>
      <p class="text-gray-600 max-w-2xl mx-auto mt-3">
        Discover our full range of high-quality products at great prices.
      </p>
      <div class="w-20 h-1 bg-primary mx-auto mt-4 rounded-full"></div>
    </div>

   <!-- Sort & Info -->
<div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-5 mb-8">
  <!-- Product Count -->
  <p class="text-gray-600 text-base">
    Showing <span class="font-semibold">{{ products|length }}</span> products
  </p>

  <!-- Sort Dropdown -->
  <div class="flex items-center gap-3">
    <label for="sort" class="text-sm font-medium text-gray-700">Sort by:</label>
    <div class="relative">
      <select id="sort"
        class="appearance-none border border-gray-300 rounded-lg pl-4 pr-10 py-2 text-sm bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition">
        <option>Newest First</option>
        <option>Price: Low to High</option>
        <option>Price: High to Low</option>
        <option>Highest Rated</option>
      </select>
      <i class="fas fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none"></i>
    </div>
  </div>
</div>


    <!-- Products Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-5">
      {% for product in 'products' %}
      <div class="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition-all duration-300 group">
        
        <!-- Product Image -->
        <div class="relative h-60 bg-gradient-to-b from-primary/30 to-white flex items-center justify-center p-4 overflow-hidden">
          <div class="absolute inset-0 bg-gradient-to-t from-black/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
          <img src="{% static product.image %}" alt="{{ product.name }}"
               class="max-h-44 transform group-hover:scale-110 transition-transform duration-500" />

          <!-- Optional Badge -->
          {% if product.badge %}
          <div class="absolute top-4 left-4 bg-primary text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-md">
            {{ product.badge }}
          </div>
          {% endif %}

          <!-- Action Buttons -->
          <div class="absolute top-4 right-4 flex flex-col space-y-2">
            <button class="w-9 h-9 rounded-full bg-white shadow-md flex items-center justify-center text-gray-500 hover:bg-primary hover:text-white transition-colors">
              <i class="far fa-heart"></i>
            </button>
          </div>
        </div>

        <!-- Product Info -->
        <div class="p-5 border-t border-gray-100">
          <div class="flex justify-between items-start mb-2">
            <h3 class="font-semibold text-gray-900 text-lg leading-tight">{{ product.name }}</h3>
            {% if product.discount %}
            <span class="text-green-600 text-sm font-medium bg-green-100 px-2 py-1 rounded-md ml-2 whitespace-nowrap">
              {{ product.discount }}% off
            </span>
            {% endif %}
          </div>

          <!-- Rating -->
          <div class="flex items-center mb-3">
            <div class="flex text-yellow-400 text-sm">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
            </div>
            <span class="text-xs text-gray-500 ml-2">({{ product.reviews }})</span>
          </div>

          <!-- Price & Add to Cart -->
          <div class="flex items-center justify-between mt-4">
            <div>
              <span class="text-primary font-bold text-xl">{{ product.price }}</span>
              {% if product.old_price %}
              <span class="text-gray-500 line-through text-sm ml-2">{{ product.old_price }}</span>
              {% endif %}
            </div>

            <a href="{% url 'addToCart' %}"
               class="bg-primary text-white w-11 h-11 rounded-full flex items-center justify-center hover:bg-primary-dark add-to-cart"
               data-product="{{ product.name }}"
               data-price="{{ product.price }}">
              <i class="fas fa-shopping-cart"></i>
            </a>
          </div>
        </div>
      </div>
      {% empty %}
      <p class="col-span-full text-center text-gray-500 text-lg">No products found.</p>
      {% endfor %}
    </div>

  </div>
</section>

{% endblock %}
