{% extends 'base.html' %}
{% load static %}
{% block body %}

<section class="w-full px-4 md:px-8 py-12">
  <div class="max-w-7xl mx-auto">

    <!-- Breadcrumb -->
    <nav class="text-sm text-gray-500 mb-6" aria-label="Breadcrumb">
      <a href="{% url 'home' %}" class="hover:text-primary">Home</a> /
      <a href="{% url 'products' %}" class="hover:text-primary">Products</a> /
      <span class="text-gray-800 font-medium">{{ product.name }}</span>
    </nav>

    <!-- Product Detail -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">

      <!-- LEFT: Images -->
      <div>
        <!-- Main Image -->
        <div class="bg-gradient-to-b from-primary/50 to-white rounded-xl overflow-hidden shadow-sm mb-4 max-h-[600px] flex items-center justify-center">
          <img id="main-product-image" src="{% static product.image %}" alt="1{{ product.name }}"
               class="max-w-full max-h-[600px] object-contain transition-transform duration-300 hover:scale-105">
        </div>
        <!-- Thumbnails -->
        <div class="grid grid-cols-4 gap-3">
          {% for thumb in '1234' %}
          <a href="{% url "productDetail" %}" class="aspect-square bg-gradient-to-b from-primary/50 to-white rounded-lg border border-gray-200 overflow-hidden cursor-pointer"
                  aria-label="View product thumbnail {{ forloop.counter }}">
            <img src="{% static thumb %}" alt="Thumbnail {{ forloop.counter }}"
                 class="w-full h-full object-cover">
          </a>
          {% endfor %}
        </div>
      </div>

      <!-- RIGHT: Product Info -->
      <div>
        <h1 class="text-2xl md:text-3xl font-bold text-gray-900 mb-3">{{ product.name }}</h1>
        <p class="text-gray-600 mb-4">{{ product.short_description }}</p>

        <!-- Rating -->
        <div class="flex items-center mb-5">
          <div class="flex text-yellow-400" aria-label="Rating: 4.5 out of 5 stars">
            <i class="fas fa-star" aria-hidden="true"></i>
            <i class="fas fa-star" aria-hidden="true"></i>
            <i class="fas fa-star" aria-hidden="true"></i>
            <i class="fas fa-star" aria-hidden="true"></i>
            <i class="fas fa-star-half-alt" aria-hidden="true"></i>
          </div>
          <span class="text-sm text-gray-500 ml-2">
            ({{ product.reviews_count }} reviews)
          </span>
        </div>

        <!-- Price -->
        <div class="flex items-center gap-3 mb-6">
          <span class="text-2xl font-bold text-primary">{{ product.price }}</span>
          {% if product.old_price %}
          <span class="text-gray-400 line-through text-lg">{{ product.old_price }}</span>
          {% endif %}
        </div>

        <!-- Quantity -->
        <div class="flex items-center gap-4 mb-6">
          <label for="quantity-input" class="text-gray-700 font-medium">Quantity:</label>
          <div class="flex items-center border border-gray-300 rounded-lg overflow-hidden">
            <button class="px-3 py-2 text-gray-600 hover:bg-gray-100 focus:outline-none focus:bg-gray-100" 
                    onclick="updateQuantity(-1)">-</button>
            <input id="quantity-input" type="number" value="1" min="1"
                   class="w-12 text-center border-l border-r border-gray-200 focus:outline-none">
            <button class="px-3 py-2 text-gray-600 hover:bg-gray-100 focus:outline-none focus:bg-gray-100" 
                    onclick="updateQuantity(1)">+</button>
          </div>
        </div>

        <!-- Actions -->
        <div class="flex items-center gap-4 mb-8">
          <button
            class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary-dark transition font-medium flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary">
            <i class="fas fa-shopping-cart" aria-hidden="true"></i> Add to Cart
          </button>
          <button
            class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:border-primary hover:text-primary transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
            aria-label="Add to wishlist">
            <i class="far fa-heart" aria-hidden="true"></i>
          </button>
        </div>

        <!-- Product Details -->
        <div>
          <h3 class="text-lg font-semibold mb-2">Product Details</h3>
          <p class="text-gray-600 leading-relaxed">
            {{ product.description }}
          </p>
        </div>
      </div>
    </div>

    <!-- Customer Reviews -->
    <div class="mt-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Customer Reviews</h2>
      {% if product.reviews %}
      <div class="space-y-6">
        {% for review in product.reviews %}
        <div class="border-b pb-4">
          <p class="text-gray-800 font-medium">{{ review.user }}</p>
          <p class="text-sm text-gray-500 mb-1">{{ review.date }}</p>
          <p class="text-gray-600">{{ review.comment }}</p>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <p class="text-gray-500">No reviews yet.</p>
      {% endif %}
    </div>

    <!-- Related Products -->
    <div class="mt-16">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">You May Also Like</h2>
      <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6">
        {% for related in '1234' %}
        <div class="bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-md transition">
          <div class="h-48 bg-gradient-to-b from-primary/50 to-white overflow-hidden">
            <img src="{% static related.image %}" alt="{{ related.name }}"
                 class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
          </div>
          <div class="p-4">
            <h3 class="font-medium text-gray-900 text-sm truncate">{{ related.name }}</h3>
            <span class="text-primary font-bold text-base">{{ related.price }}</span>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

  </div>
</section>

<script>
  // Quantity update functionality
  function updateQuantity(change) {
    const input = document.getElementById('quantity-input');
    let value = parseInt(input.value) || 1;
    value += change;
    
    // Ensure quantity doesn't go below 1
    if (value < 1) value = 1;
    
    input.value = value;
  }
</script>

{% endblock %}